<div class="mx-auto max-w-4xl px-6 py-12">
  <div class="mb-8 flex items-center justify-between">
    <a href="/dashboard" class="text-sm text-zinc-500 hover:text-zinc-300">&larr; Dashboard</a>
  </div>

  <div class="mb-12 text-center">
    <h1 class="mb-4 text-4xl font-bold text-zinc-100">ğŸ¯ Assessment Complete!</h1>
    <p class="text-lg text-zinc-400">Here's your personalized learning report</p>
  </div>

  <!-- Score Card -->
  <div class="mb-12 rounded-xl border border-zinc-800 bg-zinc-900/30 p-8 text-center">
    <div class="mb-6">
      <span class="text-6xl font-bold text-indigo-400"><%= score %></span>
      <span class="text-2xl text-zinc-400">/5</span>
    </div>
    
    <div class="mb-4">
      <span class="inline-block rounded-full border border-zinc-700 bg-zinc-800 px-4 py-2 text-lg font-semibold text-zinc-100">
        <%= levelBadge %> Level
      </span>
    </div>
    
    <p class="text-zinc-300"><%= assessment.feedback_text %></p>
  </div>

  <!-- Mistake Analysis -->
  <div class="mb-12">
    <h2 class="mb-6 text-2xl font-bold text-zinc-100">ğŸ” Mistake Analysis</h2>
    
    <% if (analysis && analysis.length > 0) { %>
      <div class="space-y-4">
        <% analysis.forEach((question, index) => { %>
          <div class="rounded-lg border border-zinc-800 bg-zinc-900/20 p-6">
            <div class="mb-3 flex items-start justify-between">
              <h3 class="font-semibold text-zinc-100">Question <%= index + 1 %></h3>
              <% if (question.correct) { %>
                <span class="rounded-full border border-green-900 bg-green-950/30 px-2 py-0.5 text-xs text-green-300">âœ… Correct</span>
              <% } else { %>
                <span class="rounded-full border border-red-900 bg-red-950/30 px-2 py-0.5 text-xs text-red-300">âŒ Incorrect</span>
              <% } %>
            </div>
            
            <% if (!question.correct) { %>
              <div class="mb-3 rounded-lg border border-red-900 bg-red-950/20 p-3 text-sm">
                <p class="font-medium text-red-300">Correct Answer: <%= question.correct_answer %></p>
                <p class="mt-1 text-red-200"><%= question.explanation %></p>
              </div>
            <% } %>
            
            <p class="text-sm text-zinc-400"><strong>Topic:</strong> <%= question.weak_topic || 'General' %></p>
            <p class="mt-2 text-zinc-300"><%= question.note %></p>
          </div>
        <% }) %>
      </div>
    <% } else { %>
      <div class="rounded-lg border border-dashed border-zinc-800 p-8 text-center text-zinc-500">
        No detailed analysis available.
      </div>
    <% } %>
  </div>

  <!-- Personalized Syllabus Preview -->
  <div class="mb-12">
    <h2 class="mb-6 text-2xl font-bold text-zinc-100">ğŸ“š Your Personalized Learning Path</h2>
    
    <div class="grid gap-4 md:grid-cols-2">
      <% syllabus.slice(0, 4).forEach((module, index) => { %>
        <div class="rounded-lg border border-zinc-800 bg-zinc-900/20 p-5">
          <div class="mb-2 flex items-center justify-between">
            <h3 class="font-semibold text-zinc-100"><%= module.title %></h3>
            <span class="rounded-full border border-zinc-700 bg-zinc-800 px-2 py-0.5 text-xs text-zinc-400">Module <%= index + 1 %></span>
          </div>
          <p class="mb-3 text-sm text-zinc-400"><%= module.description %></p>
          
          <div class="flex flex-wrap gap-2">
            <% module.topics.slice(0, 3).forEach(topic => { %>
              <span class="rounded border border-zinc-700 bg-zinc-800 px-2 py-0.5 text-xs text-zinc-300"><%= topic %></span>
            <% }) %>
            <% if (module.topics.length > 3) { %>
              <span class="rounded border border-zinc-700 bg-zinc-800 px-2 py-0.5 text-xs text-zinc-300">+<%= module.topics.length - 3 %> more</span>
            <% } %>
          </div>
        </div>
      <% }) %>
    </div>
  </div>

  <!-- Call to Action -->
  <div class="text-center">
    <a href="/course/<%= course.id %>" class="inline-block rounded-lg bg-indigo-600 px-8 py-4 text-lg font-semibold text-white transition-colors hover:bg-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-500/30">
      ğŸš€ Generate My Personalized Map & Start Learning
    </a>
  </div>
</div>

<style>
  /* Add some subtle animations */
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }
  
  .fade-in {
    animation: fadeIn 0.5s ease-out;
  }
  
  /* Add animation delays for staggered appearance */
  .fade-in-1 { animation-delay: 0.1s; }
  .fade-in-2 { animation-delay: 0.2s; }
  .fade-in-3 { animation-delay: 0.3s; }
  .fade-in-4 { animation-delay: 0.4s; }
</style>

<script>
  // Add fade-in animations on page load
  document.addEventListener('DOMContentLoaded', function() {
    const elements = document.querySelectorAll('div, h1, h2, h3, p, a, span');
    elements.forEach((el, index) => {
      if (el.classList.contains('text-zinc-100') || 
          el.classList.contains('text-zinc-400') || 
          el.classList.contains('text-zinc-300')) {
        el.classList.add('fade-in');
        const delayClass = `fade-in-${(index % 4) + 1}`;
        el.classList.add(delayClass);
      }
    });
  });
</script>